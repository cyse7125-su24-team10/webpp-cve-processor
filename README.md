# cve-processor

![Go Badge](https://img.shields.io/badge/Go-00ADD8.svg?style=for-the-badge&logo=Go&logoColor=white)
![Kafka Badge](https://img.shields.io/badge/Apache%20Kafka-231F20.svg?style=for-the-badge&logo=Apache-Kafka&logoColor=white)
![Docker Badge](https://img.shields.io/badge/Docker-2496ED.svg?style=for-the-badge&logo=Docker&logoColor=white)
![Semantic Release Badge](https://img.shields.io/badge/semanticrelease-494949.svg?style=for-the-badge&logo=semantic-release&logoColor=white)

## Overview

CVE Processor is a Go application designed to download, process, and publish Common Vulnerabilities and Exposures (CVE) records to a Kafka topic. This application utilizes the CVE Record Format to normalize and enrich CVE information.

## Functionality

1. Downloads the CVE list and processes all `JSON` files in all directories.
2. CVE Services uses the CVE Record Format (view schema [ReadMe](https://github.com/CVEProject/cve-schema/blob/main/README.md)), which normalizes and enriches how CVE information is presented, and adds optional data fields to CVE Records, such as: severity scores, credit for researchers, additional languages, affected product lists, additional references, ability for community contributions, etc.
3. Publishes processed CVEs to a Kafka topic named `cve`.
4. Exits once all CVE records have been published to the Kafka topic.

## Prerequisites

- [Go](https://golang.org/) 1.22.3 or later
- [Docker](https://www.docker.com/)
- Access to a [Kafka](https://kafka.apache.org/) cluster with 3 brokers

## Building and Running

### Using Docker

1. Build the Docker image:
   ```
   docker build -t cve-processor .
   ```

2. Run the container:
   ```
   docker run --network host cve-processor
   ```

### Running Locally

1. Install dependencies:
   ```
   go mod download
   ```

2. Build the application:
   ```
   go build -o cve-processor ./cmd/main.go
   ```

3. Run the application:
   ```
   ./cve-processor
   ```

## Configuration

The application uses environment variables for configuration. Create a `.env` file in the project root with the following variables:

```
PORT=8080
# Kafka
KAFKA_USER=
KAFKA_PASSWORD=
KAFKA_BROKER_0=
KAFKA_BROKER_1=
KAFKA_BROKER_2=
URL=
```

Make sure to replace the placeholder values with your actual configuration.

## Docker

The project includes a multi-stage Dockerfile for building and running the application in a minimal container. The final image is based on `scratch` for a smaller footprint.

## Libraries Used

- [github.com/segmentio/kafka-go](https://github.com/segmentio/kafka-go): Used for Kafka integration

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

MIT